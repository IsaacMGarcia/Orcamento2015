@model Orcamento.Robo.Web.Models.Carga.CargasModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Status</h2>

<!--  modal -->
<div id="detalheCarga" class="table table-striped table-bordered"></div>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Nome do arquivo</th>
            <th>Data/Hora do processo</th>
            <th>Status do processo</th>
            <th>Detalhes</th>
    </thead>
    <tbody>

        @if (Model == null || Model.Cargas == null || Model.Cargas.Count <= 0)
        {
            <tr>
                <td>Sem resuldatos</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        }
        else
        {
            foreach (var carga in Model.Cargas.OrderBy(x => x.DataCriacao))
            {
            <tr>
                <td>@carga.NomeArquivo</td>
                <td>@carga.DataCriacao</td>
                <td>@carga.Status</td>
                <td>
   
                     <a href="javascript:;" onclick="DetalhesCarga('@carga.Id');"  class="btn btn-xs btn-primary">
                                <i class="btn-icon-only icon-ok"> Detalhe</i>
                            </a>
                </td>
            </tr>
            }
        }
    </tbody>
</table>



<script type="text/javascript" language="javascript">

    function DetalhesCarga(id) {

        initializeDialog($("#detalheCarga"), id);

        $("#detalheCarga").dialog("open");

    };

    //Method to Initialize the DialogBox
    function initializeDialog($element, id) {
        
        $element.dialog({
            autoOpen: false,
            width: 800,
            resizable: true,
            draggable: true,
            title: "Detalhe da importação",
            model: true,
            show: 'slide',
            closeText: 'x',
            closeOnEscape: true,
            open: function () {
                $element.load('/Carga/Details/' + id);
            },
            close: function () {
                $(this).dialog('close');
            }
        });
    };

</script>
